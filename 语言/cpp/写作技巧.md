# 一些写作技巧
**对于一些变量的初始化操作如果比较损耗服务性能可以使用静态成员变量的方式**

在类内部声明，在类外部对该变量进行初始化

```cpp
// .h
class A {
 public:
  explicit A()  = default;
  ~A() = default;
  static bool IsTestEnv();

 private:
  static int a_;
};
```

```cpp
// .cpp
int aaa()
{
    return 0;
}
A::a = aaa()  // 假设是一个耗费性能的操作
```

类内的

对于需要在类内共享的成员可以使用该方式，更多场景待探索

**如果变量/函数只在该文件内被使用考虑使用匿名命名空间**

类似于 c 中的 static 使用匿名命名空间可以防止其他文件外部访问到该文件中的函数或者变量。

**其他的功能并不需要关心我的功能如何实现，只需要提供接口供其调用即可**

我新增的功能应该算作一个新的类，要与原有的业务逻辑隔离开。如果一段代码中有比较统一的功能可以考虑改成函数

**类的静态成员函数使用不需要先初始化类**

1. 静态成员函数不依赖于类的任何实例，因此它们不能访问非静态成员变量和非静态成员函数。  
2. 静态成员函数可以使用类名或对象引用进行调用。  
3. 静态成员函数在程序启动时分配内存，程序结束时释放内存。  

**对于错误码返回**

对于错误码的返回值分为需要处理和不需要处理两种情况
1. 对于不需要处理的错误码返回的值直接不接收，并在该句代码后给出不需要接收的理由
2. 对于需要处理的返回值，如果不影响主线业务逻辑将返回值使用log组件打印后，再将其赋值为0防止不小心误吞其他服务/接口的返回值。如果影响了主线逻辑则报错退出

**容器遍历**

for (const Foo& foo : container_of_foos) {
  foo.DoSomethingConstant();
}

引用的方式可以原地使用不产生拷贝。与go for rang 不同 for rang 是只创建了一个副本，每次都是向这一个副本拷贝